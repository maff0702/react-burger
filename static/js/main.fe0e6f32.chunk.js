(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{112:function(e,t,n){},116:function(e,t,n){e.exports={details__order:"order-details_details__order__2lpjF"}},117:function(e,t,n){e.exports={content__body:"main_content__body__r2UiT"}},118:function(e,t,n){e.exports={order__tape:"profile-orders_order__tape__KJ1hN"}},15:function(e,t,n){e.exports={auth__container:"auth_auth__container__LSDf1",auth__form:"auth_auth__form__14Y6D",form__text:"auth_form__text__15PXQ"}},16:function(e,t,n){e.exports={container:"app-header_container__34Anq src_container__15kJI",header:"app-header_header__f6Ris",header__content:"app-header_header__content__1Jiv5",header__menu:"app-header_header__menu__8jjST",header__list:"app-header_header__list__1l-e3",header__link:"app-header_header__link__6e7FQ",link:"app-header_link__1IKSZ",link_active:"app-header_link_active__3z8Im",header__logo:"app-header_header__logo__3rwpB",header__profile:"app-header_header__profile__lQEgN"}},228:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(35),c=n(7),s=n(39),o=n.n(s),d=function(){return Object(i.b)()},l=i.c,u=n(11),_=n(82),j=n.n(_),p=n(3),m=n(16),b=n.n(m),f=n(0);function x(){return Object(f.jsx)("header",{className:b.a.header,children:Object(f.jsxs)("div",{className:b.a.container+" pt-4 pb-4 "+b.a.header__content,children:[Object(f.jsx)("nav",{className:b.a.header__menu,children:Object(f.jsxs)("ul",{className:b.a.header__list,children:[Object(f.jsx)("li",{className:"pr-5",children:Object(f.jsxs)(c.c,{exact:!0,to:"/",className:function(e){return b.a.link+" "+(e?b.a.link_active:"")},children:[Object(f.jsx)(p.BurgerIcon,{type:"secondary"}),Object(f.jsx)("span",{className:"ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(f.jsx)("li",{className:" pl-5 ml-2 "+b.a.header__link,children:Object(f.jsxs)(c.c,{to:"/feed",className:function(e){return b.a.link+" "+(e?b.a.link_active:"")},children:[Object(f.jsx)(p.ListIcon,{type:"secondary"}),Object(f.jsx)("span",{className:"ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(f.jsx)("div",{className:b.a.header__logo,children:Object(f.jsx)(c.b,{to:"/",children:Object(f.jsx)(p.Logo,{})})}),Object(f.jsx)("div",{className:b.a.header__profile,children:Object(f.jsxs)(c.c,{to:"/profile",className:function(e){return b.a.link+" "+(e?b.a.link_active:"")},children:[Object(f.jsx)(p.ProfileIcon,{type:"secondary"}),Object(f.jsx)("span",{className:"ml-2 ",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})}var O=n(233),h=n(119),g=n(13),v=n(27),y=n.n(v),N=n(234),w=n(5),k=n(6),I=n(4),C=n.n(I),S=n(8),E=n(12),M=n(57),D=n(58),T="https://norma.nomoreparties.space/api",L="wss://norma.nomoreparties.space/orders",F=n(40),R=n.n(F),A=R.a.create({baseURL:T,headers:{"Content-Type":"application/json"}});A.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),e})),A.interceptors.response.use((function(e){return e}),function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status&&403!==t.response.status||t.config._isRetry||!n){e.next=16;break}return n._isRetry=!0,e.prev=3,e.next=6,R.a.post(T+"/auth/token",{token:localStorage.getItem("refreshToken")});case 6:return r=e.sent,localStorage.setItem("refreshToken",r.data.refreshToken),localStorage.setItem("accessToken",r.data.accessToken.split(" ")[1]),e.abrupt("return",A.request(n));case 12:e.prev=12,e.t0=e.catch(3),console.log("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c");case 15:throw t;case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}());var B,P=A,Y=function(){function e(){Object(M.a)(this,e)}return Object(D.a)(e,null,[{key:"sendOrder",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.post("/orders",{ingredients:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIngredients",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.get("/ingredients"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOrders",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.get("/orders".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),z=Object(E.b)("ingredients/requestIngredients",Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.getIngredients();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),U=Object(E.c)({name:"ingredients",initialState:{dataIngredients:[],isError:!1,isLoading:!1,currentIngredient:null,isModalIngredientDetails:!1},reducers:{ingredientCurrentIncrement:function(e,t){"bun"===t.payload.item.type&&(e.dataIngredients=e.dataIngredients.map((function(e){return"bun"===e.type?Object(k.a)(Object(k.a)({},e),{},{__v:0}):e}))),e.dataIngredients=e.dataIngredients.map((function(e){return e._id===t.payload.item._id?Object(k.a)(Object(k.a)({},e),{},{__v:e.__v+1}):e})),e.dataIngredients=e.dataIngredients.map((function(e){return"bun"===e.type&&e._id===t.payload.item._id?Object(k.a)(Object(k.a)({},e),{},{__v:2}):e}))},ingredientCurrentDecrement:function(e,t){e.dataIngredients=e.dataIngredients.map((function(e){return e._id===t.payload.id?Object(k.a)(Object(k.a)({},e),{},{__v:e.__v-1}):e}))},deletedAllCurrentIngredient:function(e){e.dataIngredients=e.dataIngredients.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{__v:0})}))},openModalIngredientDetails:function(e,t){e.currentIngredient=t.payload.ingredient,e.isModalIngredientDetails=!0},closeModalIngredientDetails:function(e){e.currentIngredient=null,e.isModalIngredientDetails=!1}},extraReducers:(B={},Object(w.a)(B,z.pending.toString(),(function(e){e.isLoading=!0})),Object(w.a)(B,z.fulfilled.toString(),(function(e,t){e.dataIngredients=t.payload.data,e.isLoading=!1})),Object(w.a)(B,z.rejected.toString(),(function(e){e.isError=!0,e.isLoading=!1})),B)}),Z=U.actions,q=Z.ingredientCurrentIncrement,G=Z.ingredientCurrentDecrement,J=Z.openModalIngredientDetails,W=Z.closeModalIngredientDetails,X=Z.deletedAllCurrentIngredient,H=U.reducer,V=function(e){var t=e.ingredient,n=Object(u.h)(),r=d(),a=Object(N.a)({type:"ingredient",item:t}),i=Object(g.a)(a,2)[1];return Object(f.jsx)("div",{className:y.a.cart__ingredient,onClick:function(){r(J({ingredient:t}))},ref:i,children:Object(f.jsxs)(c.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:n}},children:[Object(f.jsx)("span",{className:y.a.icon__counter,children:0!==t.__v&&Object(f.jsx)(p.Counter,{count:t.__v,size:"small"})}),Object(f.jsx)("img",{className:"mr-4 ml-4",src:t.image,alt:t.name}),Object(f.jsxs)("p",{className:"mt-1 text text_type_digits-default",children:[t.price," ",Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)("p",{className:"text text_type_main-default",children:t.name})]},t._id)})},Q=function(e){var t=e.data,n=e.type,r=e.title;return Object(f.jsxs)("section",{children:[Object(f.jsx)("h3",{className:"text text_type_main-medium three",children:r}),Object(f.jsx)("div",{className:y.a.burger__ingredient+" mt-6 mr-2 ml-4",children:t.map((function(e){return e.type===n&&Object(f.jsx)(V,{ingredient:e},e._id)}))})]})},K=function(){var e=l((function(e){return e.ingredients})),t=e.isError,n=e.isLoading,a=e.dataIngredients,i=Object(r.useState)("one"),c=Object(g.a)(i,2),s=c[0],o=c[1],d=Object(r.useRef)(null),u=Object(r.useRef)(null),_=Object(r.useRef)(null),j=Object(r.useRef)(null);return Object(f.jsxs)("section",{className:y.a.burger__content+" pt-10 pb-10",children:[Object(f.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),(null===a||void 0===a?void 0:a.length)>0&&Object(f.jsxs)("div",{className:y.a.dFlex+" mt-5",children:[Object(f.jsx)("span",{onClick:function(){var e;null===u||void 0===u||null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},id:"bun",children:Object(f.jsx)(p.Tab,{value:"one",active:"one"===s,onClick:o,children:"\u0411\u0443\u043b\u043a\u0438"})}),Object(f.jsx)("span",{onClick:function(){var e;null===_||void 0===_||null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},id:"sauce",children:Object(f.jsx)(p.Tab,{value:"two",active:"two"===s,onClick:o,children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(f.jsx)("span",{onClick:function(){var e;null===j||void 0===j||null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},id:"main",children:Object(f.jsx)(p.Tab,{value:"three",active:"three"===s,onClick:o,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]}),Object(f.jsxs)("div",{className:y.a.tCenter+" text text_type_main-default mt-3",children:[t&&Object(f.jsx)("span",{children:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),n&&Object(f.jsx)("span",{children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ..."})]}),(null===a||void 0===a?void 0:a.length)>0&&Object(f.jsxs)("section",{className:y.a.wrapper__ingrediends,ref:d,onScroll:function(){var e,t,n,r,a=null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect().top,i=null===u||void 0===u||null===(t=u.current)||void 0===t?void 0:t.getBoundingClientRect().top,c=null===_||void 0===_||null===(n=_.current)||void 0===n?void 0:n.getBoundingClientRect().top,s=null===j||void 0===j||null===(r=j.current)||void 0===r?void 0:r.getBoundingClientRect().top;a&&i&&c&&s&&(i<=a&&o("one"),c<=a&&o("two"),s<=a&&o("three"))},children:[Object(f.jsx)("section",{ref:u,children:Object(f.jsx)(Q,{data:a,type:"bun",title:"\u0411\u0443\u043b\u043a\u0438"})}),Object(f.jsx)("section",{ref:_,children:Object(f.jsx)(Q,{data:a,type:"sauce",title:"\u0421\u043e\u0443\u0441\u044b"})}),Object(f.jsx)("section",{ref:j,children:Object(f.jsx)(Q,{data:a,type:"main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]})]})},$=n(235),ee=n(41),te=n.n(ee),ne=n(42),re=n.n(ne),ae=n(62),ie=n.n(ae),ce=function(e){var t=e.active,n=e.closeModal,r=e.children;return Object(f.jsx)("div",{className:t?ie.a.modal+" "+ie.a.modal_active:ie.a.active,onClick:n,children:r})},se=document.getElementById("modals"),oe=function(e){var t=e.active,n=e.setActive,a=e.title,i=e.children,c=d(),s=Object(u.g)(),_=Object(u.h)();l((function(e){return e.constructors.order.isLoading}))&&(n=null);var j=function(){var e,t;n&&c(n()),s.replace({pathname:(null===_||void 0===_?void 0:_.state)?"".concat(null===_||void 0===_||null===(e=_.state)||void 0===e||null===(t=e.background)||void 0===t?void 0:t.pathname):"/"})},m=function(e){"Escape"===e.key&&j()};return Object(r.useEffect)((function(){return document.addEventListener("keydown",m),function(){return document.removeEventListener("keydown",m)}})),t&&se?o.a.createPortal(Object(f.jsx)(ce,{active:t,closeModal:j,children:Object(f.jsxs)("div",{className:t?re.a.modal__body+" "+re.a.modal__body_active:re.a.modal__body,onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)("div",{className:"text text_type_main-large "+re.a.header,children:a}),Object(f.jsx)("span",{className:re.a.modal__close,children:Object(f.jsx)(p.CloseIcon,{type:"primary",onClick:j})}),i]})}),se):null},de=n(116),le=n.n(de),ue=n.p+"static/media/ready-icon.887b83be.gif";function _e(){var e=l((function(e){return e.constructors.order})),t=e.number,n=e.isError,r=e.isLoading;return n?Object(f.jsx)(f.Fragment,{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 ..."}):r?Object(f.jsx)(f.Fragment,{children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ..."}):Object(f.jsxs)("div",{className:le.a.details__order,children:[Object(f.jsx)("p",{className:"text text_type_digits-large mt-4",children:t}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(f.jsx)("span",{className:"mt-15",children:Object(f.jsx)("img",{src:ue,alt:"\u0413\u043e\u0442\u043e\u0432\u043e",height:"120"})}),Object(f.jsx)("p",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-2 mb-20",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})}var je,pe,me,be=n(50),fe=Object(E.b)("ingredients/sendOrder",function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.sendOrder(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe=Object(E.c)({name:"constructor",initialState:{ingredients:[],bun:null,order:{number:null,name:"",isError:!1,isLoading:!1},isModalOrderDetails:!1},reducers:{addElementConstructor:function(e,t){var n=t.payload.item,r=e.ingredients.length;e.ingredients.push(Object(k.a)(Object(k.a)({},n),{},{newId:r}))},addBunConstructor:function(e,t){e.bun=t.payload.item},deleteElementConstructor:function(e,t){e.ingredients=e.ingredients.filter((function(e,n){return n!==t.payload.index}))},moveIngredientConstructor:function(e,t){var n=Object(be.a)(e.ingredients),r=e.ingredients[t.payload.dragIndex];n.splice(t.payload.dragIndex,1),n.splice(t.payload.hoverIndex,0,r),e.ingredients=Object(be.a)(n)},openModalOrderDetails:function(e){e.isModalOrderDetails=!0},closeModalOrderDetails:function(e){e.isModalOrderDetails=!1}},extraReducers:(je={},Object(w.a)(je,fe.pending.toString(),(function(e){e.order.isLoading=!0})),Object(w.a)(je,fe.fulfilled.toString(),(function(e,t){e.order.number=t.payload.order.number,e.ingredients=[],e.bun=null,e.order.name=t.payload.name,e.order.isLoading=!1})),Object(w.a)(je,fe.rejected.toString(),(function(e){e.order.isError=!0,e.order.isLoading=!1,e.order.number=null,e.order.name=""})),je)}),Oe=xe.actions,he=Oe.addElementConstructor,ge=Oe.addBunConstructor,ve=Oe.deleteElementConstructor,ye=Oe.moveIngredientConstructor,Ne=Oe.openModalOrderDetails,we=Oe.closeModalOrderDetails,ke=xe.reducer,Ie=function(e){var t=e.data,n=e.index,a=Object(i.b)(),c=t._id,s=Object(r.useRef)(null),o=Object($.a)({accept:"ingredientItem",hover:function(e,t){var r;if(s.current){var i=e.index,c=n;if(i!==c){var o=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),d=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;i<c&&l<d||i>c&&l>d||(a(ye({dragIndex:i,hoverIndex:c})),e.index=c)}}}}),d=Object(g.a)(o,2)[1],l=Object(N.a)({type:"ingredientItem",item:function(){return{id:c,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),u=Object(g.a)(l,2),_=u[0].isDragging?0:1;return(0,u[1])(d(s)),Object(f.jsxs)("span",{ref:s,draggable:!0,style:{opacity:_},children:[Object(f.jsx)(p.DragIcon,{type:"primary"}),Object(f.jsx)(p.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){a(ve({index:n,id:c})),a(G({id:c}))}})]})},Ce=function(){var e=l((function(e){return e.constructors.ingredients}));return Object(f.jsx)("div",{className:te.a.wrapper__ingrediends,children:e.map((function(e,t){return Object(f.jsx)(Ie,{index:t,data:e},e.newId)}))})},Se=function(){var e=d(),t=Object(u.g)(),n=l((function(e){return e.constructors})),r=n.ingredients,a=n.isModalOrderDetails,i=l((function(e){return e.constructors.bun})),c=Object($.a)({accept:"ingredient",drop:function(t){"bun"===t.type?(e(ge({item:t})),e(q({item:t}))):(e(he({item:t})),e(q({item:t})))}}),s=Object(g.a)(c,2)[1],o=r.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.price)}),0)+((null===i||void 0===i?void 0:i.price)?2*(null===i||void 0===i?void 0:i.price):0);return Object(f.jsxs)("div",{className:te.a.constructor__content,ref:s,children:[Object(f.jsxs)("section",{className:te.a.constructor__ingredients,children:[Object(f.jsx)("span",{className:"pl-10 ",style:{width:"552px"},children:i?Object(f.jsx)(p.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(i.name," (\u0432\u0435\u0440\u0445)"),price:i.price,thumbnail:i.image}):"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0435\u0451 \u0441\u044e\u0434\u0430 :)"}),r.length>0?Object(f.jsx)(Ce,{}):Object(f.jsx)("span",{className:"ml-10",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430"}),Object(f.jsx)("span",{className:"pl-10",style:{width:"552px"},children:i&&Object(f.jsx)(p.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(i.name," (\u043d\u0438\u0437)"),price:i.price,thumbnail:i.image})})]}),Object(f.jsxs)("div",{className:"mt-10 "+te.a.constructor__info,children:[Object(f.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[Object(f.jsx)("span",{children:o}),Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]}),i?Object(f.jsx)(p.Button,{type:"primary",size:"medium",onClick:function(){if(localStorage.getItem("accessToken")){e(Ne());var n=[];r.forEach((function(e){return n.push(e._id)})),i&&e(fe([i._id].concat(n,[i._id]))),e(X())}else t.replace({pathname:"/login"})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}):""]}),Object(f.jsx)(oe,{active:a,setActive:we,title:"",children:Object(f.jsx)(_e,{})})]})},Ee=n(117),Me=n.n(Ee),De=function(){return Object(f.jsx)("main",{className:Me.a.content__body,children:Object(f.jsxs)(O.a,{backend:h.a,children:[Object(f.jsx)(K,{}),Object(f.jsx)(Se,{})]})})},Te=n(15),Le=n.n(Te),Fe=(n(55),function(){function e(){Object(M.a)(this,e)}return Object(D.a)(e,null,[{key:"register",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.email,a=t.password,e.abrupt("return",P.post("/auth/register",{name:n,email:r,password:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.abrupt("return",P.post("/auth/login",{email:n,password:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.post("/auth/logout",{token:localStorage.getItem("refreshToken")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.post("/auth/token",{token:localStorage.getItem("refreshToken")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"checkUser",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.get("/auth/user"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.email,e.abrupt("return",P.patch("/auth/user",{name:n,email:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.a.post(T+"/password-reset",{email:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.password,r=t.token,e.abrupt("return",R.a.post(T+"/password-reset/reset",{password:n,token:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),Re=Object(E.b)("auth/register",function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.register(t.state);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae=Object(E.b)("auth/login",function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.login(t.state);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Be=Object(E.b)("auth/logout",Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.logout();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Pe=Object(E.b)("auth/checkAuth",Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.checkUser();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Ye=Object(E.b)("auth/updateUser",function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.updateUser(t.state);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ze=Object(E.b)("auth/forgotPassword",function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,e.next=3,Fe.forgotPassword(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ue=Object(E.b)("auth/resetPassword",function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.resetPassword(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ze=Object(E.c)({name:"auth",initialState:{user:null,isAuth:!1,isError:!1,isLoading:!1,forgotStatus:!1,resetStatus:!1},reducers:{},extraReducers:(pe={},Object(w.a)(pe,Re.fulfilled.toString(),(function(e,t){e.user=t.payload.user,e.isAuth=!0,e.isError=!1,localStorage.setItem("refreshToken",t.payload.refreshToken),localStorage.setItem("accessToken",t.payload.accessToken.split(" ")[1])})),Object(w.a)(pe,Re.rejected.toString(),(function(e){e.isError=!0})),Object(w.a)(pe,Ae.fulfilled.toString(),(function(e,t){e.user=t.payload.user,e.isAuth=!0,e.isError=!1,localStorage.setItem("refreshToken",t.payload.refreshToken),localStorage.setItem("accessToken",t.payload.accessToken.split(" ")[1])})),Object(w.a)(pe,Ae.rejected.toString(),(function(e){e.isError=!0})),Object(w.a)(pe,Be.fulfilled.toString(),(function(e){e.user=null,e.isAuth=!1,localStorage.removeItem("refreshToken"),localStorage.removeItem("accessToken")})),Object(w.a)(pe,Pe.pending.toString(),(function(e){e.isLoading=!0})),Object(w.a)(pe,Pe.fulfilled.toString(),(function(e,t){e.user=t.payload.user,e.isAuth=!0,e.isLoading=!1})),Object(w.a)(pe,Pe.rejected.toString(),(function(e){e.isError=!0,e.isLoading=!1})),Object(w.a)(pe,Ye.fulfilled.toString(),(function(e,t){e.user=t.payload.user})),Object(w.a)(pe,Ye.rejected.toString(),(function(e){e.isError=!0})),Object(w.a)(pe,ze.fulfilled.toString(),(function(e){e.forgotStatus=!0})),Object(w.a)(pe,ze.rejected.toString(),(function(e){e.isError=!0})),Object(w.a)(pe,Ue.fulfilled.toString(),(function(e){e.resetStatus=!0,e.forgotStatus=!1})),Object(w.a)(pe,Ue.rejected.toString(),(function(e){e.isError=!0})),pe)}).reducer,qe=function(){var e,t=d(),n=Object(u.h)(),a=Object(r.useState)({email:"",password:""}),i=Object(g.a)(a,2),s=i[0],o=i[1],_=l((function(e){return e.auth})).isError,j=function(e){var t=e.target,n=t.value,r=t.name;o(Object(k.a)(Object(k.a)({},s),{},Object(w.a)({},r,n)))};return localStorage.getItem("accessToken")?Object(f.jsx)(u.a,{to:(null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.from)||"/"}):Object(f.jsx)("div",{className:Le.a.auth__container,children:Object(f.jsxs)("div",{className:Le.a.auth__form,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(Ae({state:s}))},children:[Object(f.jsx)(p.Input,{type:"email",placeholder:"E-mail",onChange:j,value:s.email,name:"email"}),Object(f.jsx)(p.PasswordInput,{onChange:j,value:s.password,name:"password"}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),_&&Object(f.jsx)(f.Fragment,{children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:Le.a.form__text+" mt-20 text text_type_main-default text_color_inactive",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(f.jsx)(c.b,{to:"/register",children:" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(f.jsxs)("p",{className:Le.a.form__text+" mt-4 text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(f.jsx)(c.b,{to:"/forgot-password",children:" \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},Ge=function(){var e,t,n=d(),a=Object(u.h)(),i=Object(r.useState)({name:"",email:"",password:""}),s=Object(g.a)(i,2),o=s[0],_=s[1],j=l((function(e){return e.auth})).isError,m=function(e){var t=e.target,n=t.value,r=t.name;_(Object(k.a)(Object(k.a)({},o),{},Object(w.a)({},r,n)))};return localStorage.getItem("accessToken")?Object(f.jsx)(u.a,{to:(null===a||void 0===a||null===(e=a.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/"}):Object(f.jsx)("div",{className:Le.a.auth__container,children:Object(f.jsxs)("div",{className:Le.a.auth__form,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(Re({state:o}))},children:[Object(f.jsx)(p.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:m,value:o.name,name:"name"}),Object(f.jsx)(p.Input,{type:"email",placeholder:"E-mail",onChange:m,value:o.email,name:"email"}),Object(f.jsx)(p.PasswordInput,{onChange:m,value:o.password,name:"password"}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),j&&Object(f.jsx)(f.Fragment,{children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:Le.a.form__text+" mt-20 text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(f.jsx)(c.b,{to:"/login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})})},Je=function(){var e=d(),t=Object(u.g)(),n=Object(r.useState)({email:""}),a=Object(g.a)(n,2),i=a[0],s=a[1],o=l((function(e){return e.auth})),_=o.isError,j=o.forgotStatus;return localStorage.getItem("accessToken")?Object(f.jsx)(u.a,{to:"/"}):j?Object(f.jsx)(u.a,{to:{pathname:"/reset-password",state:{from:t.location}}}):Object(f.jsx)("div",{className:Le.a.auth__container,children:Object(f.jsxs)("div",{className:Le.a.auth__form,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(f.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(ze(i))},children:[Object(f.jsx)(p.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){var t=e.target,n=t.value,r=t.name;s(Object(k.a)(Object(k.a)({},i),{},Object(w.a)({},r,n)))},value:i.email,name:"email"}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),_&&Object(f.jsx)(f.Fragment,{children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:Le.a.form__text+" mt-20 text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(f.jsx)(c.b,{to:"/login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})})},We=function(){var e,t,n=d(),a=Object(u.h)(),i=Object(r.useState)({password:"",token:""}),s=Object(g.a)(i,2),o=s[0],_=s[1],j=l((function(e){return e.auth})),m=j.isError,b=function(e){var t=e.target,n=t.value,r=t.name;_(Object(k.a)(Object(k.a)({},o),{},Object(w.a)({},r,n)))};return j.resetStatus?Object(f.jsx)(u.a,{to:"/login"}):"/forgot-password"!==(null===(e=a.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)?Object(f.jsx)(u.a,{to:"/"}):Object(f.jsx)("div",{className:Le.a.auth__container,children:Object(f.jsxs)("div",{className:Le.a.auth__form,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(Ue(o))},children:[Object(f.jsx)(p.PasswordInput,{onChange:b,value:o.password,name:"password"}),Object(f.jsx)(p.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:b,value:o.token,name:"token"}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),m&&Object(f.jsx)(f.Fragment,{children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:Le.a.form__text+" mt-20 text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(f.jsx)(c.b,{to:"/login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})})},Xe=n(25),He=n.n(Xe),Ve=(n(112),function(){var e=d(),t=l((function(e){return e.auth})),n=t.isAuth,a=t.user,i=Object(r.useState)({name:"",email:"",password:""}),c=Object(g.a)(i,2),s=c[0],o=c[1];Object(r.useEffect)((function(){n&&a&&o(Object(k.a)(Object(k.a)({},s),{},{name:a.name,email:a.email}))}),[a]);var u=function(e){var t=e.target,n=t.value,r=t.name;o(Object(k.a)(Object(k.a)({},s),{},Object(w.a)({},r,n)))},_=function(t){t.preventDefault(),e(Ye({state:s}))};return Object(f.jsx)("div",{className:He.a.profile__form,children:Object(f.jsxs)("form",{onSubmit:_,children:[Object(f.jsx)(p.Input,{icon:"EditIcon",onIconClick:_,type:"text",placeholder:"\u0418\u043c\u044f",onChange:u,value:s.name,name:"name"}),Object(f.jsx)(p.Input,{icon:"EditIcon",onIconClick:_,type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:u,value:s.email,name:"email"}),Object(f.jsx)(p.Input,{icon:"EditIcon",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:u,value:s.password,name:"password"}),Object(f.jsxs)("span",{className:He.a.button__group,children:[Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(f.jsx)(p.Button,{onClick:function(e){e.preventDefault(),a&&o(Object(k.a)(Object(k.a)({},s),{},{name:a.name,email:a.email}))},type:"primary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})]})})}),Qe=n(118),Ke=n.n(Qe),$e=n(43),et=n.n($e),tt=n(28),nt=n.n(tt),rt=(n(227),function(e){nt.a.locale("ru");var t=(e=nt()(e)).from(nt()()),n="".concat(nt()(e).format("ZZ")[0]).concat(nt()(e).format("ZZ")[2]),r=nt()(e).format("HH:mm i-[GMT]".concat(n));return e.format("MMMM DD YYYY")!==nt()().subtract(1,"days").format("MMMM DD YYYY")&&"\u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434"!==t||(t="\u0412\u0447\u0435\u0440\u0430"),e.format("MMMM DD YYYY")===nt()().format("MMMM DD YYYY")&&(t="\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),"".concat(t,", ").concat(r)}),at=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.price}),0)},it=function(e,t){var n=[];return e.ingredients.forEach((function(e){t.forEach((function(t){e===t._id&&n.push(t)}))})),n},ct=function(e){return"done"===e&&Object(f.jsx)("p",{className:"text text_type_main-default mt-2",style:{color:"#00CCCC"},children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"})},st=Object(E.b)("wsOrders/requestOrders",function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.getOrders(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ot=Object(E.c)({name:"wsOrders",initialState:{orders:[],total:null,totalToday:null,message:"",url:"",isConnected:!1,isError:!1,isLoading:!1,statusCode:null,isModalOrder:!1,orderModalTitle:""},reducers:{wsConnectionStart:function(e,t){e.url=t.payload,e.isLoading=!0},wsConnectionSuccess:function(e){e.isConnected=!0,e.isError=!1},wsGetMessage:function(e,t){var n;t.payload.success?(e.orders=t.payload.orders,e.total=t.payload.total,e.totalToday=t.payload.totalToday):e.message=null===(n=t.payload)||void 0===n?void 0:n.message;e.isLoading=!1},wsConnectionClosed:function(e){e.orders=null,e.total=null,e.totalToday=null,e.isConnected=!1},wsConnectionClosedStatus:function(e,t){e.statusCode=t.payload},wsConnectionError:function(e){e.isError=!0,e.isLoading=!1},orderModalOpen:function(e,t){e.isModalOrder=!0,e.orderModalTitle=t.payload},orderModalClose:function(e){e.isModalOrder=!1,e.orderModalTitle=""}},extraReducers:(me={},Object(w.a)(me,st.pending.toString(),(function(e){e.isLoading=!0})),Object(w.a)(me,st.fulfilled.toString(),(function(e,t){e.orders=t.payload.orders,e.isLoading=!1})),Object(w.a)(me,st.rejected.toString(),(function(e){e.isError=!0,e.isLoading=!1})),me)}),dt=ot.actions,lt=dt.wsConnectionStart,ut=dt.wsConnectionSuccess,_t=dt.wsGetMessage,jt=dt.wsConnectionClosed,pt=dt.wsConnectionClosedStatus,mt=dt.wsConnectionError,bt=dt.orderModalOpen,ft=dt.orderModalClose,xt=ot.reducer,Ot=function(e){var t=e.order,n=e.status,r=d(),a=Object(u.g)(),i=a.location,s=l((function(e){return e.ingredients})).dataIngredients,o=it(t,s),_=a.location.pathname;return Object(f.jsxs)(c.b,{to:{pathname:"".concat(_,"/").concat(t._id),state:{background:i}},onClick:function(){r(bt(t.number.toString()))},className:et.a.order__card,children:[Object(f.jsxs)("div",{className:et.a.order__info,children:[Object(f.jsxs)("p",{className:"text text_type_main-default",children:["#",t.number]}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:rt(t.updatedAt)})]}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-6",children:t.name.length>60?"".concat(t.name.slice(0,60),"..."):t.name}),n&&ct(t.status),Object(f.jsxs)("div",{className:et.a.card__info,children:[Object(f.jsxs)("div",{className:et.a.card__image,children:[o.length<7&&o.map((function(e,t){return Object(f.jsx)("span",{style:{zIndex:49-t},children:Object(f.jsx)("img",{src:e.image,alt:e.name})},t)})),o.length>6&&o.map((function(e,n){return n<5?Object(f.jsx)("span",{style:{zIndex:49-n},children:Object(f.jsx)("img",{src:e.image,alt:e.name})},n):6===n?Object(f.jsx)("span",{children:Object(f.jsxs)("p",{className:"text text_type_digits-default",children:["+",t.ingredients.length-5]})},n):null}))]}),Object(f.jsxs)("div",{className:"mt-1 text text_type_digits-default "+et.a.card__price,children:[at(o)," ",Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]},t._id)},ht=function(){var e=d(),t=l((function(e){return e.wsOrders})),n=t.orders,a=t.isLoading,i=t.statusCode,c=t.message,s=localStorage.getItem("accessToken");return Object(r.useEffect)((function(){1006===i&&"Invalid or missing token"===c&&(e(Pe()),e(lt("".concat(L,"?token=").concat(s))))}),[e,i,c,s]),Object(r.useEffect)((function(){return e(lt("".concat(L,"?token=").concat(s))),function(){e(jt())}}),[e,s]),Object(f.jsx)("div",{className:Ke.a.order__tape,children:!a&&n?Object(be.a)(n).reverse().map((function(e){return Object(f.jsx)(Ot,{order:e,status:!0},e._id)})):Object(f.jsx)(f.Fragment,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})},gt=n(29),vt=n.n(gt);var yt=function(){var e=d(),t=Object(u.g)(),n=l((function(e){return e.ingredients})).dataIngredients,a=l((function(e){return e.wsOrders})).orders,i=t.location.pathname.split("/").slice(1)[0],c="";c="feed"===i?"/all":"?token=".concat(localStorage.getItem("accessToken")),Object(r.useEffect)((function(){e(st(c))}),[e,c]);var s=t.location.pathname.split("/").pop(),o=null===a||void 0===a?void 0:a.filter((function(e){return e._id===s}))[0],_=o?it(o,n):null,j={},m=_&&_.filter((function(e,t){return _.indexOf(e)===t?(j[e._id]=1,e):(j[e._id]=j[e._id]+1,!1)}));return Object(f.jsx)("div",{className:vt.a.content__body,children:o?Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{className:"text text_type_main-medium "+vt.a.order__number,children:["#",o.number]}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-10",children:o.name}),Object(f.jsx)("div",{className:"text text_type_main-default mt-3",children:ct(o.status)}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(f.jsx)("div",{className:vt.a.ingredients__container,children:null===m||void 0===m?void 0:m.map((function(e){return Object(f.jsxs)("div",{className:vt.a.ingredient__info,children:[Object(f.jsx)("span",{className:vt.a.ingredient__image,children:Object(f.jsx)("img",{src:e.image,alt:e.name})}),Object(f.jsx)("p",{className:"text text_type_main-default "+vt.a.ingredient__title,children:e.name}),Object(f.jsxs)("p",{className:"mt-1 text text_type_digits-default "+vt.a.order__price,children:[Object(f.jsxs)("span",{children:[j[e._id]," x ",e.price]})," ",Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(f.jsxs)("div",{className:vt.a.order__info,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:rt(o.updatedAt)}),Object(f.jsxs)("p",{className:"mt-1 text text_type_digits-default "+vt.a.order__price,children:[Object(f.jsx)("span",{children:at(_)})," ",Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]}):Object(f.jsx)("div",{className:"text text_type_main-medium mt-10",children:"\u0422\u0430\u043a\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ...."})})},Nt=n(120),wt=["children"],kt=function(e){var t=e.children,n=Object(Nt.a)(e,wt),r=l((function(e){return e.auth})),a=r.isAuth,i=r.isLoading,c=r.isError;return Object(f.jsx)(f.Fragment,{children:!i&&!c&&Object(f.jsx)(u.b,Object(k.a)(Object(k.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(f.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))})},It=function(){var e,t,n=d(),r=Object(u.h)(),a="PUSH"===Object(u.g)().action&&r.state&&r.state.background,i="";switch(r.pathname){case"/profile":i="\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435";break;case"/profile/orders":i="\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432";break;default:i=""}return Object(f.jsx)(kt,{path:"/profile",children:"/profile/orders"===(null===r||void 0===r||null===(e=r.state)||void 0===e||null===(t=e.background)||void 0===t?void 0:t.pathname)?Object(f.jsx)(u.d,{children:Object(f.jsx)(u.b,{exact:!0,path:"/profile/orders/:id",component:yt})}):Object(f.jsxs)("div",{className:He.a.profile__container,children:[Object(f.jsxs)("div",{className:He.a.profile__menu,children:[Object(f.jsxs)("ul",{className:"text text_type_main-medium text_color_inactive "+He.a.menu__list,children:[Object(f.jsx)("li",{children:Object(f.jsx)(c.c,{exact:!0,to:"/profile",className:function(e){return He.a.link+" "+(e?He.a.link_active:"")},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(f.jsx)("li",{children:Object(f.jsx)(c.c,{to:"/profile/orders",className:function(e){return He.a.link+" "+(e?He.a.link_active:"")},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(f.jsx)("li",{onClick:function(){n(Be())},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20 ",children:i})]}),Object(f.jsx)("div",{className:He.a.profile__content,children:Object(f.jsxs)(u.d,{location:a||r,children:[Object(f.jsx)(u.b,{exact:!0,path:"/profile",component:Ve}),Object(f.jsx)(u.b,{exact:!0,path:"/profile/orders",component:ht})]})})]})})},Ct=n(36),St=n.n(Ct),Et=function(){var e=Object(u.i)().id,t=l((function(e){return e.ingredients})).dataIngredients,n=t.filter((function(t){return t._id===e}))[0];return Object(f.jsx)(f.Fragment,{children:t.length>0?Object(f.jsxs)("div",{className:St.a.details__ingredient,children:[Object(f.jsx)("span",{children:Object(f.jsx)("img",{src:n.image,alt:n.name,height:"240"})}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-4",children:n.name}),Object(f.jsxs)("span",{className:"mt-8 mb-5 "+St.a.details__ingredient_info,children:[Object(f.jsxs)("p",{className:St.a.details__ingredient_span+" text text_type_main-default text_color_inactive",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",Object(f.jsx)("br",{}),n.calories]}),Object(f.jsxs)("p",{className:St.a.details__ingredient_span+" text text_type_main-default text_color_inactive ml-5",children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.proteins})]}),Object(f.jsxs)("p",{className:St.a.details__ingredient_span+" text text_type_main-default text_color_inactive ml-5",children:["\u0416\u0438\u0440\u044b, \u0433",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.fat})]}),Object(f.jsxs)("p",{className:St.a.details__ingredient_span+" text text_type_main-default text_color_inactive ml-5",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.carbohydrates})]})]})]}):Object(f.jsx)("span",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})},Mt=n(30),Dt=n.n(Mt);var Tt=function(){var e=d(),t=l((function(e){return e.wsOrders.orders})),n=l((function(e){return e.wsOrders})),a=n.total,i=n.totalToday,c=n.isLoading;return Object(r.useEffect)((function(){return e(lt("".concat(L,"/all"))),function(){e(jt())}}),[e]),Object(f.jsxs)("main",{className:Dt.a.content__body,children:[Object(f.jsx)("h1",{className:"text text_type_main-large mt-10",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsxs)("div",{className:Dt.a.order__container,children:[Object(f.jsx)("div",{className:Dt.a.order__tape,children:!c&&t?t.map((function(e){return Object(f.jsx)(Ot,{order:e,status:!1},e._id)})):Object(f.jsx)(f.Fragment,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}),Object(f.jsxs)("div",{className:Dt.a.order__info,children:[Object(f.jsxs)("div",{className:Dt.a.info__table,children:[Object(f.jsxs)("div",{className:Dt.a.table__ready,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(f.jsx)("div",{children:!c&&t?t.map((function(e){return"done"===e.status&&Object(f.jsx)("p",{className:"text text_type_main-default mr-5",children:e.number},e._id)})):Object(f.jsx)(f.Fragment,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})]}),Object(f.jsxs)("div",{className:Dt.a.table__preparing,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(f.jsx)("div",{children:!c&&t?t.map((function(e){return"done"!==e.status&&Object(f.jsx)("p",{className:"text text_type_main-default",children:e.number},e._id)})):Object(f.jsx)(f.Fragment,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})]})]}),Object(f.jsxs)("div",{className:Dt.a.order__all,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large",children:a})]}),Object(f.jsxs)("div",{className:Dt.a.order__today,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large",children:i})]})]})]})]})},Lt=n(37),Ft=n.n(Lt);function Rt(){var e=l((function(e){return e.ingredients.currentIngredient}));return Object(f.jsxs)("div",{className:Ft.a.details__ingredient,children:[Object(f.jsx)("span",{children:Object(f.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:null===e||void 0===e?void 0:e.name,height:"240"})}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-4",children:null===e||void 0===e?void 0:e.name}),Object(f.jsxs)("span",{className:"mt-8 mb-5 "+Ft.a.details__ingredient_info,children:[Object(f.jsxs)("p",{className:Ft.a.details__ingredient_span+" text text_type_main-default text_color_inactive",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",Object(f.jsx)("br",{}),null===e||void 0===e?void 0:e.calories]}),Object(f.jsxs)("p",{className:Ft.a.details__ingredient_span+" text text_type_main-default text_color_inactive ml-5",children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:null===e||void 0===e?void 0:e.proteins})]}),Object(f.jsxs)("p",{className:Ft.a.details__ingredient_span+" text text_type_main-default text_color_inactive ml-5",children:["\u0416\u0438\u0440\u044b, \u0433",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:null===e||void 0===e?void 0:e.fat})]}),Object(f.jsxs)("p",{className:Ft.a.details__ingredient_span+" text text_type_main-default text_color_inactive ml-5",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:null===e||void 0===e?void 0:e.carbohydrates})]})]})]})}var At=n(31),Bt=n.n(At);function Pt(){var e=Object(u.g)(),t=l((function(e){return e.ingredients})).dataIngredients,n=l((function(e){return e.wsOrders})).orders,r=e.location.pathname.split("/").pop(),a=null===n||void 0===n?void 0:n.filter((function(e){return e._id===r}))[0],i=a?it(a,t):null,c={},s=i&&i.filter((function(e,t){return i.indexOf(e)===t?(c[e._id]=1,e):(c[e._id]=c[e._id]+1,!1)}));return Object(f.jsxs)("div",{className:Bt.a.content__body,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:null===a||void 0===a?void 0:a.name}),Object(f.jsx)("div",{className:"text text_type_main-default mt-3",children:ct(null===a||void 0===a?void 0:a.status)}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(f.jsx)("div",{className:Bt.a.ingredients__container,children:null===s||void 0===s?void 0:s.map((function(e){return Object(f.jsxs)("div",{className:Bt.a.ingredient__info,children:[Object(f.jsx)("span",{className:Bt.a.ingredient__image,children:Object(f.jsx)("img",{src:e.image,alt:e.name})}),Object(f.jsx)("p",{className:"text text_type_main-default "+Bt.a.ingredient__title,children:e.name}),Object(f.jsxs)("p",{className:"mt-1 text text_type_digits-default "+Bt.a.order__price,children:[Object(f.jsxs)("span",{children:[c[e._id]," x ",e.price]})," ",Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(f.jsxs)("div",{className:Bt.a.order__info,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:rt(null===a||void 0===a?void 0:a.updatedAt)}),Object(f.jsxs)("p",{className:"mt-1 text text_type_digits-default "+Bt.a.order__price,children:[Object(f.jsx)("span",{children:at(i)})," ",Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]})}var Yt=function(){return Object(f.jsxs)("div",{children:["\u0423\u043f\u0441.... ",Object(f.jsx)("br",{}),"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442 ",Object(f.jsx)("br",{}),Object(f.jsx)(c.b,{to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})};var zt=function(){var e=d(),t=Object(u.h)(),n=Object(u.g)(),a=l((function(e){return e.ingredients})).isModalIngredientDetails,i=l((function(e){return e.wsOrders})),c=i.isModalOrder,s=i.orderModalTitle,o="PUSH"===n.action&&t.state&&t.state.background;return Object(r.useEffect)((function(){localStorage.getItem("accessToken")&&e(Pe()),e(z())}),[e]),Object(f.jsxs)("div",{className:j.a.wrapper,children:[Object(f.jsx)(x,{}),Object(f.jsxs)("div",{className:j.a.container,children:[Object(f.jsxs)(u.d,{location:o||t,children:[Object(f.jsx)(u.b,{exact:!0,path:"/",component:De}),Object(f.jsx)(u.b,{exact:!0,path:"/login",component:qe}),Object(f.jsx)(u.b,{exact:!0,path:"/register",component:Ge}),Object(f.jsx)(u.b,{exact:!0,path:"/forgot-password",component:Je}),Object(f.jsx)(u.b,{exact:!0,path:"/reset-password",component:We}),Object(f.jsx)(u.b,{path:"/profile",component:It}),Object(f.jsx)(u.b,{exact:!0,path:"/feed",component:Tt}),Object(f.jsx)(u.b,{exact:!0,path:"/feed/:id",component:yt}),Object(f.jsx)(u.b,{exact:!0,path:"/ingredients/:id",component:Et}),Object(f.jsx)(u.b,{component:Yt})]}),o&&Object(f.jsx)(u.b,{path:"/ingredients/:id",children:Object(f.jsx)(oe,{active:a,setActive:W,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(f.jsx)(Rt,{})})}),o&&Object(f.jsx)(u.b,{path:"".concat(o.pathname,"/:id"),children:Object(f.jsx)(oe,{active:c,setActive:ft,title:"#".concat(s),children:Object(f.jsx)(Pt,{})})})]})]})},Ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},Zt=Object(E.a)({reducer:{ingredients:H,constructors:ke,auth:Ze,wsOrders:xt},middleware:function(e){return e().concat((function(e){var t;return function(n){return function(r){var a=e.dispatch,i=r.type,c=r.payload;i===lt.toString()&&(t=new WebSocket(c)),t&&(t.onopen=function(){a(ut())},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);a(_t(n))},t.onerror=function(){a(mt())},t.onclose=function(e){a(pt(e.code))}),i===jt.toString()&&t.close(1e3),n(r)}}}))}});o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(i.a,{store:Zt,children:Object(f.jsx)(c.a,{basename:"/react-burger",children:Object(f.jsx)(zt,{})})})}),document.getElementById("root")),Ut()},25:function(e,t,n){e.exports={profile__container:"profile_profile__container__2vViE",profile__menu:"profile_profile__menu__3PsfC",menu__list:"profile_menu__list__34EZu",link:"profile_link__16csJ",link_active:"profile_link_active__3vXib",profile__content:"profile_profile__content__1g28a",profile__form:"profile_profile__form__3DZ1p",button__group:"profile_button__group__2XMpU"}},27:function(e,t,n){e.exports={burger__content:"burger-ingredient_burger__content__17Zxg",wrapper__ingrediends:"burger-ingredient_wrapper__ingrediends__33mhS",burger__ingredient:"burger-ingredient_burger__ingredient__3ZMjq",cart__ingredient:"burger-ingredient_cart__ingredient__1zMEV",icon__counter:"burger-ingredient_icon__counter__MfNDe",dFlex:"burger-ingredient_dFlex__1PWcI",tCenter:"burger-ingredient_tCenter__3vWrO"}},29:function(e,t,n){e.exports={content__body:"order_content__body__2dlod",order__number:"order_order__number__16L19",ingredients__container:"order_ingredients__container__Naor8",ingredient__info:"order_ingredient__info__1r9w_",ingredient__image:"order_ingredient__image__wGqEh",ingredient__title:"order_ingredient__title__2gGOh",order__info:"order_order__info__1DHo3",order__price:"order_order__price__1FAvN"}},30:function(e,t,n){e.exports={content__body:"feed_content__body__xDv9l",order__container:"feed_order__container__n411h",order__tape:"feed_order__tape__2fQyR",order__info:"feed_order__info__2Gwmc",info__table:"feed_info__table__3oHA9",table__ready:"feed_table__ready__3MgtW",table__preparing:"feed_table__preparing__1cx0h",order__all:"feed_order__all__2b1yM",order__today:"feed_order__today__1GvtC"}},31:function(e,t,n){e.exports={content__body:"order-modal_content__body__2z0Om",order__number:"order-modal_order__number__2WNHr",ingredients__container:"order-modal_ingredients__container__2j_cm",ingredient__info:"order-modal_ingredient__info__3sRCM",ingredient__image:"order-modal_ingredient__image__3Mhn2",ingredient__title:"order-modal_ingredient__title__2mzSE",order__info:"order-modal_order__info__1OXy4",order__price:"order-modal_order__price__lJYFF"}},36:function(e,t,n){e.exports={details__ingredient:"ingredient_details__ingredient__2sMHa",details__ingredient_info:"ingredient_details__ingredient_info__27LKw",details__ingredient_span:"ingredient_details__ingredient_span__38Uwq"}},37:function(e,t,n){e.exports={details__ingredient:"ingredient-details_details__ingredient__Ftb_W",details__ingredient_info:"ingredient-details_details__ingredient_info__6-XF0",details__ingredient_span:"ingredient-details_details__ingredient_span__3ftsj"}},41:function(e,t,n){e.exports={constructor__content:"burger-constructor_constructor__content__1vWo3",constructor__ingredients:"burger-constructor_constructor__ingredients__2GKoV",constructor__info:"burger-constructor_constructor__info__38FdR",wrapper__ingrediends:"burger-constructor_wrapper__ingrediends__2FoO8"}},42:function(e,t,n){e.exports={modal:"modal_modal__2a6V_",modal_active:"modal_modal_active__1SoXX",modal__body:"modal_modal__body__1fClD",modal__body_active:"modal_modal__body_active__3odvu",header:"modal_header__30ZDs",modal__close:"modal_modal__close__nwmNw",details__order:"modal_details__order__wme9e",details__ingredient:"modal_details__ingredient__2ikOA",details__ingredient_info:"modal_details__ingredient_info__3WSgm",details__ingredient_span:"modal_details__ingredient_span__TUxuQ"}},43:function(e,t,n){e.exports={order__card:"order-card_order__card__3ya6O",order__info:"order-card_order__info__3qW3N",card__info:"order-card_card__info__3U2Vm",card__image:"order-card_card__image__2vZG7",card__price:"order-card_card__price__27RzX"}},55:function(e,t,n){},62:function(e,t,n){e.exports={modal:"modal-overlay_modal__3hh0X",modal_active:"modal-overlay_modal_active__3lcOb"}},82:function(e,t,n){e.exports={wrapper:"app_wrapper__j9RjN",container:"app_container__tpsQm src_container__15kJI"}}},[[228,1,2]]]);
//# sourceMappingURL=main.fe0e6f32.chunk.js.map